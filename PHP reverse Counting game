<?php session_start() ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="EN" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Computer can you guess my number</title>
<style type = "text/css">
body { background: pink; color: green;  }
</style>
</head>
<body>

<?php


 if (isset($_SESSION["counter"])){
    $counter = $_SESSION["counter"];
  } else {
    $counter = 0;
  } // end if
  $counter++;

  //store new data in counter
  $_SESSION["counter"] = $counter;

  print <<< HERE
<form action = ""
      method = "post">
HERE;
$highest = isset($_POST['high']) ? $_POST['high'] : 100;
$lowest = isset($_POST['low']) ? $_POST['low'] : 1;
$myGuess = isset($_POST['correct']) ? $_POST['correct'] : 0;
   if(isset($_POST['choice'])){
   	if($_POST['choice']=="correct")
   		print "<br>I got it!
   		 it took me $counter tries. <br>";
   	else if($_POST['choice']=="high")
		$highest=$myGuess-1;
   	else if($_POST['choice']=="low")
		$lowest=$myGuess+1;
   }
  $myGuess=rand($lowest,$highest);
  
  
$show_submit = true;
if(!isset($_SESSION['number_to_guess'])){
    $num =  rand(1, 100);
    $_SESSION['number_to_guess'] = $num;
}
else{
    $num = $_SESSION['number_to_guess'];
}



if(isset($_POST['btn_new'])){
    session_destroy();
    header("location: index.php");
}

if(isset($_POST['btn_new'])){
    session_unset($_SESSION['number_guess']);
    header("location: index.php");
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Guess the number</title>
</head>

<body>
	<form method="post" action="" name="choice">
			<input type="radio" name="choice" value="correct"><b>Correct!</b><br>
			<input type="radio" name="choice" value="high"><b>Too High</b><br>
			<input type="hidden" id="highest" value="<?php echo $highest ?>"/>
			<input type="radio" name="choice" value="low"><b>Too Low</b><br>
			<input type="hidden" id="lowest" value="<?php echo $lowest ?>"/>
			<input type="Submit" value="Submit" align="MIDDLE">
	</form>

<p>Guess: <?php print $myGuess;?>
<form method="post" action="" name="myGuess">
<br />

</form>
</body>
</html>
